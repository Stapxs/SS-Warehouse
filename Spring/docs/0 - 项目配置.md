## Maven 配置

### 新建 Spring Maven 项目

- 快速构建骨架`archetype-webapp`
- 项目基础信息设置
- 确认 Maven 版本
- 添加设置`archetypeCatalog`为`internal`，作用是使用本地资源，加快创建。

### 添加依赖

添加`spring-context`依赖，版本`5.3.4`

~~~xml
<dependency>
	<groupId>org.springframework</groupId>
	<artifactId>spring-context</artifactId>
	<version>5.3.4</version>
</dependency>
~~~

注意检查运行的 Java 版本是否对应

~~~xml
<properties>
	<project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
	<maven.compiler.source>1.8</maven.compiler.source>
	<maven.compiler.target>1.8</maven.compiler.target>
</properties>
~~~

添加完成后同步 Maven

## Spring 配置

### 静态配置

配置 xml 对象（app.xml）

~~~xml
<bean id="UserDao" class="cn.stapxs.example.UserDaoimpl"/>
~~~

编写静态方法调用 xml

~~~java
// UserDao.java TODO 接口
public interface UserDao {
    public void say();
}

// UserDaoImpl.java TODO 实现
public class UserDaoimpl implements UserDao{
    @Override
    public void say() {
        System.out.println("你好世界！");
    }
}

// Test.java
public class Test {
    public static  void main(String[] args) {
        ApplicationContext acc = new ClassPathXmlApplicationContext("index.xml");
        UserDao userDao = acc.getBean("UserDao", UserDao.class);
        userDao.say();
    }
}
~~~

### @Repository、@Configuration、@Bean 注解

~~~java
// TestDao.java TODO 接口
public interface TestDao {
    public void test();
}

// TestDaoImpl.java TODO 实现接口
@Repository("testDao")
public class TestDaoImpl implements TestDao{
    @Override
    public void test() {
        System.out.println("你好世界！（Java）");
    }
}

//IoCConfig.java TODO 注解实现 Bean 
@Configuration
public class IoCConfig {
    @Bean
    public TestDao test() {
        return new TestDaoImpl();
    }
}

// TestAnnotation.java TODO 测试
public class TestAnnotation {
    public static void main(String[] args) {
        AnnotationConfigApplicationContext acc =
                new AnnotationConfigApplicationContext(IoCConfig.class);
        TestDao testDao = acc.getBean(TestDao.class);
        testDao.say();
    }
}
~~~

### @Service、@Autowired、@ComponentScan 注解

接口

~~~java
// TestService.java TODO 接口
public interface TestService {
    void test();
}
~~~

实现接口，使用 @Autowired 自动装配

~~~java
// TestServiceImpl.java TODO 实现，装配
@Service("testService")
public class TestServiceImpl implements TestService{
    @Autowired
    private TestDao testDao;

    @Override
    public void test() {
        testDao.say();
        System.out.println("来自 testService");
    }
}
~~~

依旧需要使用 2.2 中的注解 Bean，使用 @ComponentScan 自动扫描组件

~~~java
//IoCConfig.java TODO 注解实现 Bean 
@Configuration
@ComponentScan("cn.stapxs.ioc")
public class IoCConfig {
    @Bean
    public TestDao test() {
        return new TestDaoImpl();
    }
}
~~~

测试

~~~java
// TestAnnotation.java TODO 测试
public class TestAnnotation {
    public static void main(String[] args) {
        AnnotationConfigApplicationContext acc =
                new AnnotationConfigApplicationContext(IoCConfig.class);
        TestService testService = acc.getBean(TestService.class);
        testService.test();
    }
}
~~~



